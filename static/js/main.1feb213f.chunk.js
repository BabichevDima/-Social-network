(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[0],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(5);const a="network/dialogsPage/SEND-MESSAGE",c={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your it-kamasutra?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}]},s=(e=c,t)=>{switch(t.type){case a:const n={id:6,message:t.newMessageBody};return Object(r.a)(Object(r.a)({},e),{},{messages:[...e.messages,n]});default:return e}},i=e=>({type:a,newMessageBody:e})},101:function(e,t,n){"use strict";n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return k}));var r=n(9),a=n.n(r),c=n(16),s=n(5),i=n(18);const o="network/usersPage/FOLLOW",u="network/usersPage/UNFOLLOW",l="network/usersPage/SET-USERS",d="network/usersPage/SET-TOTAL-USERS-COUNT",j="network/usersPage/TOGGLE-IS-FETCHING",b="network/usersPage/TOGGLE-IS-FOLLOWING-PROGRESS",p="network/usersPage/SET-CURRENT-PAGE",f={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},O=(e=f,t)=>{switch(t.type){case o:return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((e=>e.id===t.userId?Object(s.a)(Object(s.a)({},e),{},{followed:!0}):e))});case u:return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((e=>e.id===t.userId?Object(s.a)(Object(s.a)({},e),{},{followed:!1}):e))});case l:return Object(s.a)(Object(s.a)({},e),{},{users:t.users});case p:return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.page});case d:return Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.totalCount});case j:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});case b:return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[...e.followingInProgress,t.userId]:e.followingInProgress.filter((e=>e!=t.userId))});default:return e}},h=e=>({type:o,userId:e}),g=e=>({type:u,userId:e}),m=e=>({type:p,page:e}),x=e=>({type:j,isFetching:e}),v=(e,t)=>({type:b,isFetching:e,userId:t}),w=(e,t)=>function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),r(m(e)),n.next=4,i.c.getUsers(e,t);case 4:c=n.sent,r(x(!1)),r((s=c.items,{type:l,users:s})),r((a=c.totalCount,{type:d,totalCount:a}));case 8:case"end":return n.stop()}var a,s}),n)})));return function(e){return n.apply(this,arguments)}}(),y=e=>function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v(!0,e)),t.next=3,i.c.follow(e);case 3:0==t.sent.resultCode&&n(h(e)),n(v(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=e=>function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v(!0,e)),t.next=3,i.c.unfollow(e);case 3:0==t.sent.resultCode&&n(g(e)),n(v(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},18:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(126);const a=n.n(r).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"f13c6464-ffc2-4463-bde6-cefac36f4c02"}}),c={getUsers:(e,t)=>a.get("users?page=".concat(e,"&count=").concat(t)).then((e=>e.data)),unfollow:e=>a.delete("follow/".concat(e)).then((e=>e.data)),follow:e=>a.post("follow/".concat(e),{}).then((e=>e.data)),getProfile:e=>(console.warn("Obsolete method. Please profileAPI object."),i.getProfile(e))},s={me:()=>a.get("auth/me").then((e=>e.data)),login:(e,t,n=!1)=>a.post("auth/login",{email:e,password:t,rememberMe:n}),logOut:()=>a.delete("auth/login").then((e=>e.data))},i={getProfile:e=>a.get("profile/"+e).then((e=>e.data)),getStatus:e=>a.get("profile/status/"+e).then((e=>e.data)),updateStatus:e=>a.put("profile/status",{status:e}).then((e=>e.data))}},21:function(e,t,n){e.exports={nav:"Navbar_nav__3nZEK",item:"Navbar_item__3vQch",example:"Navbar_example__1zEcc",activeLink:"Navbar_activeLink__3exSW"}},241:function(e,t,n){},242:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);var r=n(1);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(10);const c={};var s=n(90),i=n(100),o=n(101),u=n(9),l=n.n(u),d=n(16),j=n(5),b=n(18),p=n(49);const f="network/auth/SET-USER-DATA",O={id:null,email:null,login:null,isAuth:!1},h=(e,t,n,r)=>({type:f,payload:{id:e,email:t,login:n,isAuth:r}}),g=()=>function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.me();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,c=r.email,s=r.login,t(h(a,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m="network/app/INITIALIZED-SUCCESS",x={initialized:!1};var v=n(127),w=n(125);const y=Object(a.c)({profilePage:s.d,dialogsPage:i.a,sidebar:(e=c,t)=>e,usersPage:o.e,auth:(e=O,t)=>{switch(t.type){case f:return Object(j.a)(Object(j.a)({},e),t.payload);default:return e}},form:w.a,app:(e=x,t)=>{switch(t.type){case m:return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return e}}}),k=Object(a.e)(y,Object(a.a)(v.a));window.store=k;var S=n(0),P=n.n(S),E=n(59),C=n.n(E),I=(n(241),n(12)),L=(n(242),n(13)),N=n(27),A=n.p+"static/media/Network.7f721bdf.png";function T(){const e=Object(I.a)(["\n  float: right;\n"]);return T=function(){return e},e}function U(){const e=Object(I.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n"]);return U=function(){return e},e}function _(){const e=Object(I.a)(["\n  grid-area: h;\n  background-color: #6e6e6e;\n"]);return _=function(){return e},e}const z=({isAuth:e,login:t,loginOut:n})=>Object(r.jsxs)(F,{children:[Object(r.jsx)(M,{src:A,alt:"Logo"}),Object(r.jsx)(R,{children:e?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:n,children:"Log out"})})]}):Object(r.jsx)(N.b,{to:"/login",children:"Login"})})]}),F=L.a.div(_()),M=L.a.img(U()),R=L.a.div(T());var D=n(22);class G extends S.Component{render(){return Object(r.jsx)(z,Object(j.a)({},this.props))}}const W=Object(D.b)((e=>({isAuth:e.auth.isAuth,login:e.auth.login})),{loginOut:()=>function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.logOut();case 2:0===e.sent.resultCode&&t(h(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})(G);var B=n(21),H=n.n(B);const Y=()=>Object(r.jsxs)("nav",{className:H.a.nav,children:[Object(r.jsx)("div",{className:H.a.item,children:Object(r.jsx)(N.b,{to:"/profile",activeClassName:H.a.activeLink,children:"Profile"})}),Object(r.jsx)("div",{className:"".concat(H.a.item," ").concat(H.a.active),children:Object(r.jsx)(N.b,{to:"/dialogs",activeClassName:H.a.activeLink,children:"Messages"})}),Object(r.jsx)("div",{className:"".concat(H.a.item," ").concat(H.a.active),children:Object(r.jsx)(N.b,{to:"/users",activeClassName:H.a.activeLink,children:"Users"})}),Object(r.jsx)("div",{className:H.a.item,children:Object(r.jsx)("span",{children:"News"})}),Object(r.jsx)("div",{className:H.a.item,children:Object(r.jsx)("span",{children:"Music"})}),Object(r.jsx)("div",{className:H.a.item,children:Object(r.jsx)("span",{children:"Settings"})})]});var J=n(11),K=n(123),V=n(124),Z=n(60),q=n(62);function Q(){const e=Object(I.a)(["\n  color: red;\n  padding-left: 3px;\n"]);return Q=function(){return e},e}const $=Object(Z.a)(30),X=Object(V.a)({form:"login"})((({handleSubmit:e,error:t})=>Object(r.jsxs)("form",{onSubmit:e,children:[Object(r.jsx)("div",{children:Object(r.jsx)(K.a,{placeholder:"Email",name:"email",component:q.a,validate:[Z.b,$]})}),Object(r.jsx)("div",{children:Object(r.jsx)(K.a,{placeholder:"Password",name:"password",type:"password",component:q.a,validate:[Z.b,$]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(K.a,{type:"checkbox",name:"rememberMe",component:q.a}),"remember me"]}),t&&Object(r.jsx)(te,{children:t}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]}))),ee=Object(D.b)((e=>({isAuth:e.auth.isAuth})),{Login:(e,t,n)=>function(){var r=Object(d.a)(l.a.mark((function r(a){var c,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.login(e,t,n);case 2:0===(c=r.sent).data.resultCode?a(g()):(s=c.data.messages.length>0?c.data.messages[0]:"Some error",a(Object(p.a)("login",{_error:s})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})((e=>e.isAuth?Object(r.jsx)(J.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(X,{onSubmit:t=>{e.Login(t.email,t.password,t.rememberMe),console.log(t)}})]}))),te=L.a.div(Q());var ne=n(58);const re=e=>t=>Object(r.jsx)(S.Suspense,{fallback:Object(r.jsx)(ne.a,{}),children:Object(r.jsx)(e,Object(j.a)({},t))});function ae(){const e=Object(I.a)(["\n  grid-area: c;\n  background-color: cornflowerblue;\n"]);return ae=function(){return e},e}function ce(){const e=Object(I.a)(['\n  margin: 0 auto;\n  display: grid;\n  width: 1200px;\n  grid-template-areas: "h h" "n c";\n  grid-template-rows: 60px 1fr;\n  grid-template-columns: 2fr 10fr;\n']);return ce=function(){return e},e}const se=P.a.lazy((()=>n.e(3).then(n.bind(null,290)))),ie=P.a.lazy((()=>n.e(5).then(n.bind(null,291)))),oe=P.a.lazy((()=>n.e(4).then(n.bind(null,289))));class ue extends S.Component{componentDidMount(){this.props.initializeApp()}render(){return this.props.initialized?Object(r.jsxs)(de,{children:[Object(r.jsx)(W,{}),Object(r.jsx)(Y,{}),Object(r.jsxs)(je,{children:[Object(r.jsx)(J.b,{path:"/dialogs",component:re(ie)}),Object(r.jsx)(J.b,{path:"/profile/:userId?",component:re(se)}),Object(r.jsx)(J.b,{path:"/users",render:()=>Object(r.jsx)(S.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(oe,{})})}),Object(r.jsx)(J.b,{path:"/login",component:re(ee)})]})]}):Object(r.jsx)(ne.a,{})}}const le=Object(a.d)(J.f,Object(D.b)((e=>({initialized:e.app.initialized})),{initializeApp:()=>function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g());case 2:e.sent,t({type:m});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))(ue),de=L.a.div(ce()),je=L.a.div(ae());n(286);C.a.render(Object(r.jsx)(D.a,{store:k,children:Object(r.jsx)(N.a,{children:Object(r.jsx)(le,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=(n(0),n(130));const c=e=>Object(r.jsx)(a.a,{animation:"border"})},60:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const r=e=>{if(!e)return"Field is required"},a=e=>t=>{if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var r=n(12),a=n(1),c=n(5),s=n(82),i=(n(0),n(13)),o=n.p+"static/media/Attention.50cc6494.png";function u(){const e=Object(r.a)(["\n  width: 40px;\n  height: 40px;\n"]);return u=function(){return e},e}function l(){const e=Object(r.a)(["\n  color: red;\n"]);return l=function(){return e},e}function d(){const e=Object(r.a)(["\n  border: solid 2px red;\n"]);return d=function(){return e},e}function j(){const e=Object(r.a)([""]);return j=function(){return e},e}function b(){const e=Object(r.a)(["\n  border: solid 2px red;\n"]);return b=function(){return e},e}function p(){const e=Object(r.a)([""]);return p=function(){return e},e}const f=e=>{let t=e.input,n=e.meta,r=Object(s.a)(e,["input","meta"]);const i=n.error&&n.touched;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:i?Object(a.jsx)(g,Object(c.a)(Object(c.a)({},t),r)):Object(a.jsx)(h,Object(c.a)(Object(c.a)({},t),r))}),i&&Object(a.jsxs)("div",{children:[Object(a.jsxs)(v,{children:['"',n.error,'"']}),Object(a.jsx)(w,{src:o})]})]})},O=e=>{let t=e.input,n=e.meta,r=Object(s.a)(e,["input","meta"]);const i=n.error&&n.touched;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:i?Object(a.jsx)(x,Object(c.a)(Object(c.a)({},t),r)):Object(a.jsx)(m,Object(c.a)(Object(c.a)({},t),r))}),i&&Object(a.jsxs)("div",{children:[Object(a.jsxs)(v,{children:['"',n.error,'"']}),Object(a.jsx)(w,{src:o})]})]})},h=i.a.textarea(p()),g=i.a.textarea(b()),m=i.a.input(j()),x=i.a.input(d()),v=i.a.span(l()),w=i.a.img(u())},90:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return g}));var r=n(9),a=n.n(r),c=n(16),s=n(5),i=n(18);const o="network/profilePage/ADD-POST",u="network/profilePage/SET-USER-PROFILE",l="network/profilePage/SET-STATUS",d="network/profilePage/DELETE-POST",j={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"Blabla",likesCount:18},{id:4,message:"Dada",likesCount:5}],profile:null,status:""},b=(e=j,t)=>{switch(t.type){case o:const n={id:5,message:t.newPost,likesCount:0};return Object(s.a)(Object(s.a)({},e),{},{posts:[...e.posts,n]});case d:return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((e=>e.id!=t.postId))});case u:return Object(s.a)(Object(s.a)({},e),{},{profile:t.payload});case l:return Object(s.a)(Object(s.a)({},e),{},{status:t.status});default:return e}},p=e=>({type:o,newPost:e}),f=e=>function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.c.getProfile(e);case 2:r=t.sent,n({type:u,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=e=>({type:l,status:e}),h=e=>function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(O(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=e=>function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(O(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},[[287,1,2]]]);
//# sourceMappingURL=main.1feb213f.chunk.js.map